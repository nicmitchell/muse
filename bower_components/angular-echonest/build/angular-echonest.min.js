!function(){"use strict";angular.module("angular-echonest",[]).provider("Echonest",function(){var a,b,c,d,e,f,g="http://developer.echonest.com/api/v4/",h="",i=function(a,b){var c=f.defer();return b.api_key=h,b.format="jsonp",b.callback="JSON_CALLBACK",e({method:"JSONP",url:g+a,params:b}).success(function(a){c.resolve(a.response)}),c.promise},j=function(a,b){var c=f.defer(),d=this;return b=b||{},b.id=d.id,i("artist/"+a,b).then(function(b){d[a]=b[a],c.resolve(d)}),c.promise},k=function(a){var b=[];if(a instanceof Object)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},l=function(b,c){return i("artist/"+b,c).then(function(b){var c=[];for(var d in b.artists)c.push(new a(b.artists[d]));return c})};this.setApiKey=function(a){h=a},a=function(a){if(a instanceof Object)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},a.prototype={getBiographies:function(a){return j.call(this,"biographies",a)},getBlogs:function(a){return j.call(this,"blogs",a)},getImages:function(a){return j.call(this,"images",a)},getNews:function(a){return j.call(this,"news",a)},getReviews:function(a){return j.call(this,"reviews",a)},getSongs:function(a){return j.call(this,"songs",a)},getFamiliarity:function(a){return j.call(this,"familiarity",a)},getHotnes:function(a){return j.call(this,"hotttnesss",a)},getSimilar:function(a){return j.call(this,"similar",a)},getTerms:function(a){return j.call(this,"terms",a)},getTwitter:function(a){return j.call(this,"twitter",a)},getUrls:function(a){return j.call(this,"urls",a)}},b=function(){return this},b.prototype={search:function(a){var b=k(a);return l.call(this,"search",b)},get:function(b){return b instanceof Object?i("artist/profile",b).then(function(b){return new a(b.artist)}):void 0},topHot:function(a){var b=k(a);return l.call(this,"top_hottt",b)},suggest:function(a){var b=k(a);return l.call(this,"suggest",b)},extract:function(a){var b=k(a);return l.call(this,"extract",b)}},c=function(){return this},c.prototype={search:function(a){var b=k(a);return i("song/search",b).then(function(a){return a.songs})},get:function(a){return a instanceof Object?i("song/profile",a).then(function(a){return a.songs[0]}):void 0},identify:function(a){var b=k(a);return i("song/identify",b).then(function(a){return a.songs})}},this.$get=["$http","$q",function(a,g){return e=a,f=g,d={artists:new b,songs:new c}}]})}();